<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Iconv
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!Iconv.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (I)</a> &raquo;
    
    
    <span class="title">Iconv</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Iconv
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Data.html" title="Data (class)">Data</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="Data.html" title="Data (class)">Data</a></span></li>
          
            <li class="next">Iconv</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">ext/iconv/iconv.c<span class="defines">,<br />
  ext/iconv/iconv.c</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h2 id="label-Summary">Summary</h2>

<p>Ruby extension for charset conversion.</p>

<h2 id="label-Abstract">Abstract</h2>

<p>Iconv is a wrapper class for the UNIX 95 <code>iconv()</code> function
family, which translates string between various encoding systems.</p>

<p>See Open Group’s on-line documents for more details.</p>
<ul><li>
<p><code>iconv.h</code>:       <a
href="http://www.opengroup.org/onlinepubs/007908799/xsh/iconv.h.html">www.opengroup.org/onlinepubs/007908799/xsh/iconv.h.html</a></p>
</li><li>
<p><code>iconv_open()</code>:  <a
href="http://www.opengroup.org/onlinepubs/007908799/xsh/iconv_open.html">www.opengroup.org/onlinepubs/007908799/xsh/iconv_open.html</a></p>
</li><li>
<p><code>iconv()</code>:       <a
href="http://www.opengroup.org/onlinepubs/007908799/xsh/iconv.html">www.opengroup.org/onlinepubs/007908799/xsh/iconv.html</a></p>
</li><li>
<p><code>iconv_close()</code>: <a
href="http://www.opengroup.org/onlinepubs/007908799/xsh/iconv_close.html">www.opengroup.org/onlinepubs/007908799/xsh/iconv_close.html</a></p>
</li></ul>

<p>Which coding systems are available is platform-dependent.</p>

<h2 id="label-Examples">Examples</h2>
<ol><li>
<p>Simple conversion between two charsets.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_converted_text'>converted_text</span> <span class='op'>=</span> <span class='const'>Iconv</span><span class='period'>.</span><span class='id identifier rubyid_conv'>conv</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>iso-8859-15</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>utf-8</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id identifier rubyid_text'>text</span><span class='rparen'>)</span></code></pre>
</li><li>
<p>Instantiate a new Iconv and use method Iconv#iconv.</p>

<pre class="ruby"><span class="ruby-identifier">cd</span> = <span class="ruby-constant">Iconv</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">to</span>, <span class="ruby-identifier">from</span>)
<span class="ruby-keyword">begin</span>
  <span class="ruby-identifier">input</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cd</span>.<span class="ruby-identifier">iconv</span>(<span class="ruby-identifier">s</span>) }
  <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cd</span>.<span class="ruby-identifier">iconv</span>(<span class="ruby-keyword">nil</span>)                   <span class="ruby-comment"># Don't forget this!</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-identifier">cd</span>.<span class="ruby-identifier">close</span>
<span class="ruby-keyword">end</span>
</pre>
</li><li>
<p>Invoke Iconv.open with a block.</p>

<pre class="ruby"><span class="ruby-constant">Iconv</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">to</span>, <span class="ruby-identifier">from</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cd</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">input</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cd</span>.<span class="ruby-identifier">iconv</span>(<span class="ruby-identifier">s</span>) }
  <span class="ruby-identifier">output</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cd</span>.<span class="ruby-identifier">iconv</span>(<span class="ruby-keyword">nil</span>)
<span class="ruby-keyword">end</span>
</pre>
</li><li>
<p>Shorthand for (3).</p>

<pre class="code ruby"><code class="ruby"><span class='const'>Iconv</span><span class='period'>.</span><span class='id identifier rubyid_iconv'>iconv</span><span class='lparen'>(</span><span class='id identifier rubyid_to'>to</span><span class='comma'>,</span> <span class='id identifier rubyid_from'>from</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_input'>input</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='rparen'>)</span></code></pre>
</li></ol>

<h2 id="label-Attentions">Attentions</h2>

<p>Even if some extentions of implementation dependent are useful, DON’T USE
those extentions in libraries and scripts to widely distribute. If you want
to use those feature, use String#encode.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Iconv/BrokenLibrary.html" title="Iconv::BrokenLibrary (class)">BrokenLibrary</a></span>, <span class='object_link'><a href="Iconv/Failure.html" title="Iconv::Failure (class)">Failure</a></span>, <span class='object_link'><a href="Iconv/IllegalSequence.html" title="Iconv::IllegalSequence (class)">IllegalSequence</a></span>, <span class='object_link'><a href="Iconv/InvalidCharacter.html" title="Iconv::InvalidCharacter (class)">InvalidCharacter</a></span>, <span class='object_link'><a href="Iconv/InvalidEncoding.html" title="Iconv::InvalidEncoding (class)">InvalidEncoding</a></span>, <span class='object_link'><a href="Iconv/OutOfRange.html" title="Iconv::OutOfRange (class)">OutOfRange</a></span>
    
  
</p>







  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#charset_map-class_method" title="charset_map (class method)">+ (Object) <strong>charset_map</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the map from canonical name to system dependent name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#conv-class_method" title="conv (class method)">+ (Object) <strong>conv</strong>(to, from, str) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Shorthand for   Iconv.iconv(to, from, str).join See Iconv.iconv.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ctlmethods-class_method" title="ctlmethods (class method)">+ (Array) <strong>ctlmethods</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns available iconvctl() method list.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#iconv-class_method" title="iconv (class method)">+ (Object) <strong>iconv</strong>(to, from, *strs) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Shorthand for   Iconv.open(to, from) { |cd|     (strs + [nil]).collect {
|s| cd.iconv(s) }   }.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list-class_method" title="list (class method)">+ (Object) <strong>list</strong> {|*aliases| ... }</a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Iterates each alias sets.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open-class_method" title="open (class method)">+ (Object) <strong>open</strong>(to, from) {|iconv| ... }</a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Equivalent to Iconv.new except that when it is called with a block, it
yields with the new instance and closes it, and returns the result which
returned from the block.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-instance_method" title="#close (instance method)">- (Object) <strong>close</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Finishes conversion.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#conv-instance_method" title="#conv (instance method)">- (Object) <strong>conv</strong>(str...) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Equivalent to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discard_ilseq%3D-instance_method" title="#discard_ilseq= (instance method)">- (Object) <strong>discard_ilseq=</strong>(flag) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets discard_ilseq flag.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discard_ilseq%3F-instance_method" title="#discard_ilseq? (instance method)">- (Boolean) <strong>discard_ilseq?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns discard_ilseq flag.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#iconv-instance_method" title="#iconv (instance method)">- (Object) <strong>iconv</strong>(str, start = 0, length = -1) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Converts string and returns the result.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#new (instance method)">- (Object) <strong>new</strong>(to, from, [options]) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates new code converter from a coding-system designated with
<code>from</code> to another one designated with <code>to</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transliterate%3D-instance_method" title="#transliterate= (instance method)">- (Object) <strong>transliterate=</strong>(flag) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets transliterate flag.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#transliterate%3F-instance_method" title="#transliterate? (instance method)">- (Boolean) <strong>transliterate?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns transliterate flag.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trivial%3F-instance_method" title="#trivial? (instance method)">- (Boolean) <strong>trivial?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns trivial flag.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>new</strong>(to, from, [options]) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates new code converter from a coding-system designated with
<code>from</code> to another one designated with <code>to</code>.</p>

<h3 id="label-Parameters">Parameters</h3>
<dl class="rdoc-list note-list"><dt><code>to</code>
<dd>
<p>encoding name for destination</p>
</dd><dt><code>from</code>
<dd>
<p>encoding name for source</p>
</dd><dt><code>options</code>
<dd>
<p>options for converter</p>
</dd></dl>

<h3 id="label-Exceptions">Exceptions</h3>
<dl class="rdoc-list note-list"><dt>TypeError
<dd>
<p>if <code>to</code> or <code>from</code> aren’t String</p>
</dd><dt>InvalidEncoding
<dd>
<p>if designated converter couldn’t find out</p>
</dd><dt>SystemCallError
<dd>
<p>if <code>iconv_open(3)</code> fails</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


651
652
653
654
655
656
657
658
659
660
661
662
663
664
665</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 651</span>

static VALUE
iconv_initialize(int argc, VALUE *argv, VALUE self)
{
    VALUE to, from, options;
    struct rb_iconv_opt_t opt;
    int idx;

    rb_scan_args(argc, argv, &quot;21&quot;, &amp;to, &amp;from, &amp;options);
    get_iconv_opt(&amp;opt, options);
    iconv_free(check_iconv(self));
    DATA_PTR(self) = NULL;
    DATA_PTR(self) = (void *)ICONV2VALUE(iconv_create(to, from, &amp;opt, &amp;idx));
    if (idx &gt;= 0) ENCODING_SET(self, idx);
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="charset_map-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>charset_map</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the map from canonical name to system dependent name.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


139
140
141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 139</span>

static VALUE
charset_map_get(void)
{
    return charset_map;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="conv-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>conv</strong>(to, from, str) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Shorthand for</p>

<pre class="code"><code class=""><span class='const'>Iconv</span><span class='period'>.</span><span class='id identifier rubyid_iconv'>iconv</span><span class='lparen'>(</span><span class='id identifier rubyid_to'>to</span><span class='comma'>,</span> <span class='id identifier rubyid_from'>from</span><span class='comma'>,</span> <span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span></code></pre>

<p>See Iconv.iconv.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


759
760
761
762
763
764
765
766
767
768
769
770</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 759</span>

static VALUE
iconv_s_conv(VALUE self, VALUE to, VALUE from, VALUE str)
{
    struct iconv_env_t arg;

    arg.argc = 1;
    arg.argv = &amp;str;
    arg.append = rb_str_append;
    arg.ret = rb_str_new(0, 0);
    arg.cd = iconv_create(to, from, NULL, &amp;arg.toidx);
    return rb_ensure(iconv_s_convert, (VALUE)&amp;arg, iconv_free, ICONV2VALUE(arg.cd));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ctlmethods-class_method">
  
    + (<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></tt>) <strong>ctlmethods</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns available iconvctl() method list.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 1072</span>

static VALUE
iconv_s_ctlmethods(VALUE klass)
{
    VALUE ary = rb_ary_new();
#ifdef ICONV_TRIVIALP
    rb_ary_push(ary, ID2SYM(rb_intern(&quot;trivial?&quot;)));
#endif
#ifdef ICONV_GET_TRANSLITERATE
    rb_ary_push(ary, ID2SYM(rb_intern(&quot;transliterate?&quot;)));
#endif
#ifdef ICONV_SET_TRANSLITERATE
    rb_ary_push(ary, ID2SYM(rb_intern(&quot;transliterate=&quot;)));
#endif
#ifdef ICONV_GET_DISCARD_ILSEQ
    rb_ary_push(ary, ID2SYM(rb_intern(&quot;discard_ilseq?&quot;)));
#endif
#ifdef ICONV_SET_DISCARD_ILSEQ
    rb_ary_push(ary, ID2SYM(rb_intern(&quot;discard_ilseq=&quot;)));
#endif
    return ary;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="iconv-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>iconv</strong>(to, from, *strs) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Shorthand for</p>

<pre class="ruby"><span class="ruby-constant">Iconv</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">to</span>, <span class="ruby-identifier">from</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">cd</span><span class="ruby-operator">|</span>
  (<span class="ruby-identifier">strs</span> <span class="ruby-operator">+</span> [<span class="ruby-keyword">nil</span>]).<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">cd</span>.<span class="ruby-identifier">iconv</span>(<span class="ruby-identifier">s</span>) }
}
</pre>

<h3 id="label-Parameters">Parameters</h3>
<dl class="rdoc-list note-list"><dt><code>to, from</code>
<dd>
<p>see Iconv.new</p>
</dd><dt><code>strs</code>
<dd>
<p>strings to be converted</p>
</dd></dl>

<h3 id="label-Exceptions">Exceptions</h3>

<p>Exceptions thrown by Iconv.new, Iconv.open and Iconv#iconv.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


735
736
737
738
739
740
741
742
743
744
745
746
747
748
749</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 735</span>

static VALUE
iconv_s_iconv(int argc, VALUE *argv, VALUE self)
{
    struct iconv_env_t arg;

    if (argc &lt; 2)		/* needs `to' and `from' arguments at least */
	rb_raise(rb_eArgError, &quot;wrong number of arguments (%d for %d)&quot;, argc, 2);

    arg.argc = argc -= 2;
    arg.argv = argv + 2;
    arg.append = rb_ary_push;
    arg.ret = rb_ary_new2(argc);
    arg.cd = iconv_create(argv[0], argv[1], NULL, &amp;arg.toidx);
    return rb_ensure(iconv_s_convert, (VALUE)&amp;arg, iconv_free, ICONV2VALUE(arg.cd));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="list-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>list</strong> {|*aliases| ... }
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Iterates each alias sets.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>*aliases</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 819</span>

static VALUE
iconv_s_list(void)
{
#ifdef HAVE_ICONVLIST
    int state;
    VALUE args[2];

    args[1] = rb_block_given_p() ? 0 : rb_ary_new();
    iconvlist(list_iconv, args);
    state = *(int *)args;
    if (state) rb_jump_tag(state);
    if (args[1]) return args[1];
#elif defined(HAVE___ICONV_FREE_LIST)
    char **list;
    size_t sz, i;
    VALUE ary;

    if (__iconv_get_list(&amp;list, &amp;sz)) return Qnil;

    ary = rb_ary_new2(sz);
    for (i = 0; i &lt; sz; i++) {
	rb_ary_push(ary, rb_str_new2(list[i]));
    }
    __iconv_free_list(list, sz);

    if (!rb_block_given_p())
	return ary;
    for (i = 0; i &lt; RARRAY_LEN(ary); i++) {
	rb_yield(RARRAY_PTR(ary)[i]);
    }
#endif
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>open</strong>(to, from) {|iconv| ... }
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Equivalent to Iconv.new except that when it is called with a block, it
yields with the new instance and closes it, and returns the result which
returned from the block.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#iconv-class_method" title="Iconv.iconv (method)">iconv</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 675</span>

static VALUE
iconv_s_open(int argc, VALUE *argv, VALUE self)
{
    VALUE to, from, options, cd;
    struct rb_iconv_opt_t opt;
    int idx;

    rb_scan_args(argc, argv, &quot;21&quot;, &amp;to, &amp;from, &amp;options);
    get_iconv_opt(&amp;opt, options);
    cd = ICONV2VALUE(iconv_create(to, from, &amp;opt, &amp;idx));

    self = Data_Wrap_Struct(self, NULL, ICONV_FREE, (void *)cd);
    if (idx &gt;= 0) ENCODING_SET(self, idx);

    if (rb_block_given_p()) {
	return rb_ensure(rb_yield, self, (VALUE(*)())iconv_finish, self);
    }
    else {
	return self;
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="close-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>close</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Finishes conversion.</p>

<p>After calling this, calling Iconv#iconv will cause an exception, but
multiple calls of #close are guaranteed to end successfully.</p>

<p>Returns a string containing the byte sequence to change the output buffer
to its initial shift state.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


875
876
877
878
879
880
881
882</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 875</span>

static VALUE
iconv_finish(VALUE self)
{
    VALUE cd = check_iconv(self);

    if (!cd) return Qnil;
    return rb_ensure(iconv_init_state, self, iconv_free, cd);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="conv-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>conv</strong>(str...) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Equivalent to</p>

<pre class="code"><code class="">iconv(nil, str..., nil).join</code></pre>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 951</span>

static VALUE
iconv_conv(int argc, VALUE *argv, VALUE self)
{
    iconv_t cd = VALUE2ICONV(check_iconv(self));
    VALUE str, s;
    int toidx = ENCODING_GET(self);

    str = iconv_convert(cd, Qnil, 0, 0, toidx, NULL);
    if (argc &gt; 0) {
	do {
	    s = iconv_convert(cd, *argv++, 0, -1, toidx, NULL);
	    if (RSTRING_LEN(s))
		rb_str_buf_append(str, s);
	} while (--argc);
	s = iconv_convert(cd, Qnil, 0, 0, toidx, NULL);
	if (RSTRING_LEN(s))
	    rb_str_buf_append(str, s);
    }

    return str;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="discard_ilseq=-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>discard_ilseq=</strong>(flag) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets discard_ilseq flag.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1055
1056
1057
1058
1059
1060
1061</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 1055</span>

static VALUE
iconv_set_discard_ilseq(VALUE self, VALUE discard_ilseq)
{
    int dis = RTEST(discard_ilseq);
    iconv_ctl(self, ICONV_SET_DISCARD_ILSEQ, dis);
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="discard_ilseq?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>discard_ilseq?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns discard_ilseq flag.</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1036
1037
1038
1039
1040
1041
1042
1043</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 1036</span>

static VALUE
iconv_get_discard_ilseq(VALUE self)
{
    int dis = 0;
    iconv_ctl(self, ICONV_GET_DISCARD_ILSEQ, dis);
    if (dis) return Qtrue;
    return Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="iconv-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>iconv</strong>(str, start = 0, length = -1) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Converts string and returns the result.</p>
<ul><li>
<p>If <code>str</code> is a String, converts <code>str[start, length]</code>
and returns the converted string.</p>
</li><li>
<p>If <code>str</code> is <code>nil</code>, places converter itself into
initial shift state and just returns a string containing the byte sequence
to change the output buffer to its initial shift state.</p>
</li><li>
<p>Otherwise, raises an exception.</p>
</li></ul>

<h3 id="label-Parameters">Parameters</h3>
<dl class="rdoc-list note-list"><dt>str
<dd>
<p>string to be converted, or nil</p>
</dd><dt>start
<dd>
<p>starting offset</p>
</dd><dt>length
<dd>
<p>conversion length; nil or -1 means whole the string from start</p>
</dd></dl>

<h3 id="label-Exceptions">Exceptions</h3>
<ul><li>
<p>IconvIllegalSequence</p>
</li><li>
<p>IconvInvalidCharacter</p>
</li><li>
<p>IconvOutOfRange</p>
</li></ul>

<h3 id="label-Examples">Examples</h3>

<p>See the Iconv documentation.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


911
912
913
914
915
916
917
918
919
920
921
922
923
924
925
926
927
928
929
930
931
932
933
934
935
936
937
938
939
940
941</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 911</span>

static VALUE
iconv_iconv(int argc, VALUE *argv, VALUE self)
{
    VALUE str, n1, n2;
    VALUE cd = check_iconv(self);
    long start = 0, length = 0, slen = 0;

    rb_scan_args(argc, argv, &quot;12&quot;, &amp;str, &amp;n1, &amp;n2);
    if (!NIL_P(str)) {
	VALUE n = rb_str_length(StringValue(str));
	slen = NUM2LONG(n);
    }
    if (argc != 2 || !RTEST(rb_range_beg_len(n1, &amp;start, &amp;length, slen, 0))) {
	if (NIL_P(n1) || ((start = NUM2LONG(n1)) &lt; 0 ? (start += slen) &gt;= 0 : start &lt; slen)) {
	    length = NIL_P(n2) ? -1 : NUM2LONG(n2);
	}
    }
    if (start &gt; 0 || length &gt; 0) {
	rb_encoding *enc = rb_enc_get(str);
	const char *s = RSTRING_PTR(str), *e = s + RSTRING_LEN(str);
	const char *ps = s;
	if (start &gt; 0) {
	    start = (ps = rb_enc_nth(s, e, start, enc)) - s;
	}
	if (length &gt; 0) {
	    length = rb_enc_nth(ps, e, length, enc) - ps;
	}
    }

    return iconv_convert(VALUE2ICONV(cd), str, start, length, ENCODING_GET(self), NULL);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transliterate=-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>transliterate=</strong>(flag) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets transliterate flag.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1018
1019
1020
1021
1022
1023
1024</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 1018</span>

static VALUE
iconv_set_transliterate(VALUE self, VALUE transliterate)
{
    int trans = RTEST(transliterate);
    iconv_ctl(self, ICONV_SET_TRANSLITERATE, trans);
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="transliterate?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>transliterate?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns transliterate flag.</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


999
1000
1001
1002
1003
1004
1005
1006</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 999</span>

static VALUE
iconv_get_transliterate(VALUE self)
{
    int trans = 0;
    iconv_ctl(self, ICONV_GET_TRANSLITERATE, trans);
    if (trans) return Qtrue;
    return Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trivial?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>trivial?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns trivial flag.</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


980
981
982
983
984
985
986
987</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/iconv/iconv.c', line 980</span>

static VALUE
iconv_trivialp(VALUE self)
{
    int trivial = 0;
    iconv_ctl(self, ICONV_TRIVIALP, trivial);
    if (trivial) return Qtrue;
    return Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Wed Nov 19 10:17:03 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-1.9.3).
</div>

  </body>
</html>