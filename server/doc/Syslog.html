<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: Syslog
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!Syslog.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">Syslog</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Syslog
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
      <dt class="r1">Includes:</dt>
      <dd class="r1"><span class='object_link'><a href="Syslog/Constants.html" title="Syslog::Constants (module)">Constants</a></span></dd>
      
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">ext/syslog/syslog.c</dd>
  
</dl>
<div class="clear"></div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Syslog/Constants.html" title="Syslog::Constants (module)">Constants</a></span>
    
  
    
  
</p>







  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-class_method" title="close (class method)">+ (Object) <strong>close</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Closes the syslog facility.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#facility-class_method" title="facility (class method)">+ (Object) <strong>facility</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the facility number used in the last call to open().</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ident-class_method" title="ident (class method)">+ (Object) <strong>ident</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the identity string used in the last call to open().</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-class_method" title="inspect (class method)">+ (Object) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns an inspect() string summarizing the object state.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instance-class_method" title="instance (class method)">+ (Object) <strong>instance</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns self, for backward compatibility.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log-class_method" title="log (class method)">+ (Object) <strong>log</strong>(priority, format_string, *format_args) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Log a message with the specified priority.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#LOG_MASK-class_method" title="LOG_MASK (class method)">+ (Object) <strong>LOG_MASK</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#LOG_UPTO-class_method" title="LOG_UPTO (class method)">+ (Object) <strong>LOG_UPTO</strong>(priority_level) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generates a mask value for priority levels at or below the level specified.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mask-class_method" title="mask (class method)">+ (Object) <strong>mask</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the log priority mask in effect.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mask%3D-class_method" title="mask= (class method)">+ (Object) <strong>mask=</strong>(priority_mask) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the log priority mask.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open-class_method" title="open (class method)">+ (Object) <strong>open</strong>(ident, options, facility) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:yields: syslog.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open%21-class_method" title="reopen (class method)">+ (Object) <strong>reopen</strong>(ident, options, facility) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:yields: syslog.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#opened%3F-class_method" title="opened? (class method)">+ (Boolean) <strong>opened?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if the syslog is open.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-class_method" title="options (class method)">+ (Object) <strong>options</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the options bitmask used in the last call to open().</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reopen-class_method" title="reopen (class method)">+ (Object) <strong>reopen</strong>(ident, options, facility) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>:yields: syslog.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="close-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>close</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Closes the syslog facility. Raises a runtime exception if it is not open.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 43</span>

static VALUE mSyslog_close(VALUE self)
{
    rb_secure(4);
    if (!syslog_opened) {
        rb_raise(rb_eRuntimeError, &quot;syslog not opened&quot;);
    }

    closelog();

    free((void *)syslog_ident);
    syslog_ident = NULL;
    syslog_options = syslog_facility = syslog_mask = -1;
    syslog_opened = 0;

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="facility-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>facility</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the facility number used in the last call to open()</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


222
223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 222</span>

static VALUE mSyslog_facility(VALUE self)
{
    return syslog_opened ? INT2NUM(syslog_facility) : Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ident-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>ident</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the identity string used in the last call to open()</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


208
209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 208</span>

static VALUE mSyslog_ident(VALUE self)
{
    return syslog_opened ? rb_str_new2(syslog_ident) : Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>inspect</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns an inspect() string summarizing the object state.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 314</span>

static VALUE mSyslog_inspect(VALUE self)
{
    char buf[1024];

    Check_Type(self, T_MODULE);

    if (syslog_opened) {
	snprintf(buf, sizeof(buf),
	  &quot;&lt;#%s: opened=true, ident=\&quot;%s\&quot;, options=%d, facility=%d, mask=%d&gt;&quot;,
	  rb_class2name(self),
	  syslog_ident,
	  syslog_options,
	  syslog_facility,
	  syslog_mask);
    } else {
	snprintf(buf, sizeof(buf),
	  &quot;&lt;#%s: opened=false&gt;&quot;, rb_class2name(self));
    }

    return rb_str_new2(buf);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="instance-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>instance</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns self, for backward compatibility.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


338
339
340
341</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 338</span>

static VALUE mSyslog_instance(VALUE self)
{
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>log</strong>(priority, format_string, *format_args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Log a message with the specified priority. Example:</p>

<pre class="code"><code class=""><span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_CRIT</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Out of disk space</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_CRIT</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>User %s logged in</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>USER</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span></code></pre>

<p>The priority levels, in descending order, are:</p>
<dl class="rdoc-list note-list"><dt>LOG_EMERG
<dd>
<p>System is unusable</p>
</dd><dt>LOG_ALERT
<dd>
<p>Action needs to be taken immediately</p>
</dd><dt>LOG_CRIT
<dd>
<p>A critical condition has occurred</p>
</dd><dt>LOG_ERR
<dd>
<p>An error occurred</p>
</dd><dt>LOG_WARNING
<dd>
<p>Warning of a possible problem</p>
</dd><dt>LOG_NOTICE
<dd>
<p>A normal but significant condition occurred</p>
</dd><dt>LOG_INFO
<dd>
<p>Informational message</p>
</dd><dt>LOG_DEBUG
<dd>
<p>Debugging information</p>
</dd></dl>

<p>Each priority level also has a shortcut method that logs with it’s named
priority. As an example, the two following statements would produce the
same result:</p>

<pre class="code"><code class=""><span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_ALERT</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Out of memory</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_alert'>alert</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Out of memory</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>

<p>Format strings are as for printf/sprintf, except that in addition %m is
replaced with the error message string that would be returned by
strerror(errno).</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 292</span>

static VALUE mSyslog_log(int argc, VALUE *argv, VALUE self)
{
    VALUE pri;

    if (argc &lt; 2) {
        rb_raise(rb_eArgError, &quot;wrong number of arguments (%d for 2+)&quot;, argc);
    }

    argc--;
    pri = *argv++;

    if (!FIXNUM_P(pri)) {
      rb_raise(rb_eTypeError, &quot;type mismatch: %s given&quot;, rb_class2name(CLASS_OF(pri)));
    }

    syslog_write(FIX2INT(pri), argc, argv);

    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="LOG_MASK-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>LOG_MASK</strong> 
  

  

  
</h3>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="LOG_UPTO-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>LOG_UPTO</strong>(priority_level) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generates a mask value for priority levels at or below the level specified.
See #mask=</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


392
393
394
395</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 392</span>

static VALUE mSyslogConstants_LOG_UPTO(VALUE klass, VALUE pri)
{
    return INT2FIX(LOG_UPTO(NUM2INT(pri)));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mask-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>mask</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the log priority mask in effect. The mask is not reset by opening
or closing syslog.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


230
231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 230</span>

static VALUE mSyslog_get_mask(VALUE self)
{
    return syslog_opened ? INT2NUM(syslog_mask) : Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mask=-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>mask=</strong>(priority_mask) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the log priority mask. A method LOG_UPTO is defined to make it easier
to set mask values. Example:</p>

<pre class="code"><code class=""><span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_mask'>mask</span> <span class='op'>=</span> <span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_UPTO</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_ERR</span><span class='rparen'>)</span></code></pre>

<p>Alternatively, specific priorities can be selected and added together using
binary OR. Example:</p>

<pre class="code"><code class=""><span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_mask'>mask</span> <span class='op'>=</span> <span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_MASK</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_ERR</span><span class='rparen'>)</span> <span class='op'>|</span> <span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_MASK</span><span class='lparen'>(</span><span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_CRIT</span><span class='rparen'>)</span></code></pre>

<p>The priority mask persists through calls to open() and close().</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


250
251
252
253
254
255
256
257
258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 250</span>

static VALUE mSyslog_set_mask(VALUE self, VALUE mask)
{
    rb_secure(4);
    if (!syslog_opened) {
        rb_raise(rb_eRuntimeError, &quot;must open syslog before setting log mask&quot;);
    }

    setlogmask(syslog_mask = NUM2INT(mask));

    return mask;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>open</strong>(ident, options, facility) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:yields: syslog</p>

<p>Open the syslog facility. Raises a runtime exception if it is already open.</p>

<p>Can be called with or without a code block. If called with a block, the
Syslog object created is passed to the block.</p>

<p>If the syslog is already open, raises a RuntimeError.</p>

<p><code>ident</code> is a String which identifies the calling program.</p>

<p><code>options</code> is the logical OR of any of the following:</p>
<dl class="rdoc-list note-list"><dt>LOG_CONS
<dd>
<p>If there is an error while sending to the system logger, write directly to
the console instead.</p>
</dd><dt>LOG_NDELAY
<dd>
<p>Open the connection now, rather than waiting for the first message to be
written.</p>
</dd><dt>LOG_NOWAIT
<dd>
<p>Don’t wait for any child processes created while logging messages. (Has no
effect on Linux.)</p>
</dd><dt>LOG_ODELAY
<dd>
<p>Opposite of LOG_NDELAY; wait until a message is sent before opening the
connection. (This is the default.)</p>
</dd><dt>LOG_PERROR
<dd>
<p>Print the message to stderr as well as sending it to syslog. (Not in
POSIX.1-2001.)</p>
</dd><dt>LOG_PID
<dd>
<p>Include the current process ID with each message.</p>
</dd></dl>

<p><code>facility</code> describes the type of program opening the syslog, and
is the logical OR of any of the following which are defined for the host
OS:</p>
<dl class="rdoc-list note-list"><dt>LOG_AUTH
<dd>
<p>Security or authorization. Deprecated, use LOG_AUTHPRIV instead.</p>
</dd><dt>LOG_AUTHPRIV
<dd>
<p>Security or authorization messages which should be kept private.</p>
</dd><dt>LOG_CONSOLE
<dd>
<p>System console message.</p>
</dd><dt>LOG_CRON
<dd>
<p>System task scheduler (cron or at).</p>
</dd><dt>LOG_DAEMON
<dd>
<p>A system daemon which has no facility value of its own.</p>
</dd><dt>LOG_FTP
<dd>
<p>An FTP server.</p>
</dd><dt>LOG_KERN
<dd>
<p>A kernel message (not sendable by user processes, so not of much use to
Ruby, but listed here for completeness).</p>
</dd><dt>LOG_LRP
<dd>
<p>Line printer subsystem.</p>
</dd><dt>LOG_MAIL
<dd>
<p>Mail delivery or transport subsystem.</p>
</dd><dt>LOG_NEWS
<dd>
<p>Usenet news system.</p>
</dd><dt>LOG_NTP
<dd>
<p>Network Time Protocol server.</p>
</dd><dt>LOG_SECURITY
<dd>
<p>General security message.</p>
</dd><dt>LOG_SYSLOG
<dd>
<p>Messages generated internally by syslog.</p>
</dd><dt>LOG_USER
<dd>
<p>Generic user-level message.</p>
</dd><dt>LOG_UUCP
<dd>
<p>UUCP subsystem.</p>
</dd><dt>LOG_LOCAL0 to LOG_LOCAL7
<dd>
<p>Locally-defined facilities.</p>
</dd></dl>

<p>Example:</p>

<pre class="code"><code class=""><span class='const'>Syslog</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>webrick</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_PID</span><span class='comma'>,</span>
            <span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_DAEMON</span> <span class='op'>|</span> <span class='const'>Syslog</span><span class='op'>::</span><span class='const'>LOG_LOCAL3</span><span class='rparen'>)</span></code></pre>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 138</span>

static VALUE mSyslog_open(int argc, VALUE *argv, VALUE self)
{
    VALUE ident, opt, fac;

    if (syslog_opened) {
        rb_raise(rb_eRuntimeError, &quot;syslog already open&quot;);
    }

    rb_scan_args(argc, argv, &quot;03&quot;, &amp;ident, &amp;opt, &amp;fac);

    if (NIL_P(ident)) {
        ident = rb_gv_get(&quot;$0&quot;);
    }
    SafeStringValue(ident);
    syslog_ident = strdup(RSTRING_PTR(ident));

    if (NIL_P(opt)) {
	syslog_options = LOG_PID | LOG_CONS;
    } else {
	syslog_options = NUM2INT(opt);
    }

    if (NIL_P(fac)) {
	syslog_facility = LOG_USER;
    } else {
	syslog_facility = NUM2INT(fac);
    }

    openlog(syslog_ident, syslog_options, syslog_facility);

    syslog_opened = 1;

    setlogmask(syslog_mask = setlogmask(0));

    /* be like File.new.open {...} */
    if (rb_block_given_p()) {
        rb_ensure(rb_yield, self, mSyslog_close, self);
    }

    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open!-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>reopen</strong>(ident, options, facility) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:yields: syslog</p>

<p>Closes and then reopens the syslog.</p>

<p>Arguments are the same as for open().</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191
192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 189</span>

static VALUE mSyslog_reopen(int argc, VALUE *argv, VALUE self)
{
    mSyslog_close(self);

    return mSyslog_open(argc, argv, self);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="opened?-class_method">
  
    + (<tt>Boolean</tt>) <strong>opened?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if the syslog is open.</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 201</span>

static VALUE mSyslog_isopen(VALUE self)
{
    return syslog_opened ? Qtrue : Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="options-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>options</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the options bitmask used in the last call to open()</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217
218</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 215</span>

static VALUE mSyslog_options(VALUE self)
{
    return syslog_opened ? INT2NUM(syslog_options) : Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reopen-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>reopen</strong>(ident, options, facility) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>:yields: syslog</p>

<p>Closes and then reopens the syslog.</p>

<p>Arguments are the same as for open().</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191
192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/syslog/syslog.c', line 189</span>

static VALUE mSyslog_reopen(int argc, VALUE *argv, VALUE self)
{
    mSyslog_close(self);

    return mSyslog_open(argc, argv, self);
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Wed Nov 19 10:16:17 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-1.9.3).
</div>

  </body>
</html>